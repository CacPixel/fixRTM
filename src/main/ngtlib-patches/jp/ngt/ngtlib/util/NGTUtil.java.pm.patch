--- a/jp/ngt/ngtlib/util/NGTUtil.java
+++ b/jp/ngt/ngtlib/util/NGTUtil.java
@@ -35,11 +35,13 @@
          return !NGTUtilClient.getMinecraft().isSingleplayer();
       }
    }
 
    public static boolean openedLANWorld() {
-      return !isServer() && !NGTUtilClient.getMinecraft().isSingleplayer() ? NGTUtilClient.getMinecraft().getIntegratedServer().getPublic() : false;
+      MinecraftServer server = getServer();
+      return server instanceof net.minecraft.server.integrated.IntegratedServer
+         && ((net.minecraft.server.integrated.IntegratedServer)server).getPublic();
    }
 
    @SideOnly(Side.CLIENT)
    public static World getClientWorld() {
       return NGTCore.proxy.getWorld();
