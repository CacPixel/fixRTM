--- a/jp/ngt/rtm/event/RTMKeyHandlerClient.java
+++ b/jp/ngt/rtm/event/RTMKeyHandlerClient.java
@@ -19,11 +19,11 @@
 import net.minecraft.entity.Entity;
 import net.minecraft.entity.player.EntityPlayer;
 import net.minecraft.util.text.TextComponentString;
 import net.minecraftforge.fml.client.registry.ClientRegistry;
 import net.minecraftforge.fml.common.eventhandler.SubscribeEvent;
-import net.minecraftforge.fml.common.gameevent.InputEvent.KeyInputEvent;
+import net.minecraftforge.fml.common.gameevent.InputEvent;
 import net.minecraftforge.fml.relauncher.Side;
 import net.minecraftforge.fml.relauncher.SideOnly;
 import org.lwjgl.input.Keyboard;
 
 @SideOnly(Side.CLIENT)
@@ -51,25 +51,25 @@
    }
 
    public void onTickStart() {
       Minecraft minecraft = NGTUtilClient.getMinecraft();
       EntityPlayer entityplayer = minecraft.player;
-      if (Keyboard.isKeyDown(minecraft.gameSettings.keyBindJump.getKeyCode())) {
+      if (minecraft.gameSettings.keyBindJump.isKeyDown()) {
          if (entityplayer.isRiding() && entityplayer.getRidingEntity() instanceof EntityVehicle) {
             this.sendKeyToServer((byte)9, "");
          }
-      } else if (Keyboard.isKeyDown(minecraft.gameSettings.keyBindSneak.getKeyCode()) && entityplayer.isRiding() && entityplayer.getRidingEntity() instanceof EntityPlane && !entityplayer.getRidingEntity().onGround) {
+      } else if (minecraft.gameSettings.keyBindSneak.isKeyDown() && entityplayer.isRiding() && entityplayer.getRidingEntity() instanceof EntityPlane && !entityplayer.getRidingEntity().onGround) {
          this.sendKeyToServer((byte)10, "");
       }
 
    }
 
    public void onTickEnd() {
    }
 
    @SubscribeEvent
-   public void keyDown(KeyInputEvent event) {
+   public void keyDown(InputEvent event) {
       Minecraft minecraft = NGTUtilClient.getMinecraft();
       EntityPlayer entityplayer = minecraft.player;
       Entity entity = entityplayer.getRidingEntity();
       if (minecraft.gameSettings.keyBindBack.isPressed()) {
          if (entityplayer.isRiding() && entity instanceof EntityTrainBase) {
@@ -152,11 +152,11 @@
                   s = astring[i][1];
                   MacroRecorder.INSTANCE.recChime(player.world, astring[i][1]);
                }
             }
 
-            if (!s.isEmpty()) {
+            if (s != null && !s.isEmpty()) {
                this.sendKeyToServer(key, s);
             }
          }
       }
 
